{% load static %}
<div class="col-12 mx-0" {% if bg_color %}style="background-color: {{ bg_color }} !important;" {% endif %}>
    <div class="col-12 d-flex align-items-center">
        <h1 class="m-2">{{ title }}</h1>
    </div>
    <div class="row m-0 p-0">
        {% for product in products %}
            <div class="col-xl-2 col-md-4 col-6 m-0 p-2">
                <div class="card col-12  d-flex m-0 p-0">
                    <img src="{{ product.image.url }}" class="card-img-top p-2"
                         style="height: 240px !important; object-fit: cover" alt="{{ product.name }} image">
                    <div class="card-body d-flex" style="flex-direction: column">
                        {#                        {{ forloop.counter }}. #}
                        <a class="btn" href="{% url 'product_detail' product.pk %}">
                            <h5 class="card-title" style="overflow-y: hidden; height: 120px !important;">
                                {{ product.name }} by {{ product.brand }}
                            </h5>
                        </a>
                        <div class="d-flex justify-content-center">
                            {% include 'partials/stars.html' with grade=product.average_rating %}
                        </div>
                    </div>
                </div>
            </div>
        {% empty %}
            <p>{{ empty_text }}</p>
        {% endfor %}
    </div>
</div>